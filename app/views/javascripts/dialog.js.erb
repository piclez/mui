$(document).ready(function(){
  var $self = jQuery(this);
  var fullHeight = $('.mi_dialog_window').height();
  var fullWidth = $('.mi_dialog_window').width();
  $('.mi_dialog_target').css('margin-left', (fullWidth/2)*(-1));
  $('.mi_dialog_target').css('margin-top', (fullHeight/2)*(-1));
  $('.mi_click_dialog_close').click(function(){
    $('.mi_dialog_window').fadeOut(function(){
      $('.mi_dialog_target').empty();
    });
  	return false;
  });
  $('.mi_dialog_window').draggable();
  $('.mi_focus').focus();
});
$(document).keyup(function(event){
  if (event.keyCode == 27) {
    $('.mi_dialog_window').fadeOut(function(){
      $('.mi_dialog_target').empty();
    });
  	return false;
  }
});